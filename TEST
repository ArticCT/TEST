local OrionLibrary = {}

-- Function to create the Orion UI window
function OrionLibrary:CreateWindow(windowTitle)
    -- Main GUI Components
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "OrionUI"
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 600, 0, 400)
    mainFrame.Position = UDim2.new(0.5, -300, 0.5, -200)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    mainFrame.BorderSizePixel = 0
    mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    mainFrame.Parent = screenGui
    mainFrame.Active, mainFrame.Draggable = true, true

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = mainFrame

    -- Title Bar
    local titleBar = Instance.new("Frame")
    titleBar.Name = "TitleBar"
    titleBar.Size = UDim2.new(1, 0, 0, 40)
    titleBar.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    titleBar.BorderSizePixel = 0
    titleBar.Parent = mainFrame

    local title = Instance.new("TextLabel")
    title.Name = "Title"
    title.Size = UDim2.new(1, -40, 1, 0)
    title.Position = UDim2.new(0, 10, 0, 0)
    title.BackgroundTransparency = 1
    title.Text = windowTitle or "Orion UI Library"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 20
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = titleBar

    -- Close Button
    local closeButton = Instance.new("TextButton")
    closeButton.Name = "CloseButton"
    closeButton.Size = UDim2.new(0, 30, 0, 30)
    closeButton.Position = UDim2.new(1, -35, 0.5, -15)
    closeButton.BackgroundTransparency = 1
    closeButton.Text = "X"
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.Font = Enum.Font.GothamBold
    closeButton.TextScaled = true
    closeButton.Parent = titleBar

    closeButton.MouseButton1Click:Connect(function()
        screenGui:Destroy()
    end)

    -- Tabs and Content Areas
    local tabsContainer = Instance.new("Frame")
    tabsContainer.Name = "TabsContainer"
    tabsContainer.Size = UDim2.new(0, 180, 1, -40)
    tabsContainer.Position = UDim2.new(0, 0, 0, 40)
    tabsContainer.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    tabsContainer.BorderSizePixel = 0
    tabsContainer.Parent = mainFrame

    local tabsCorner = Instance.new("UICorner")
    tabsCorner.CornerRadius = UDim.new(0, 10)
    tabsCorner.Parent = tabsContainer

    local contentArea = Instance.new("Frame")
    contentArea.Name = "ContentArea"
    contentArea.Size = UDim2.new(1, -180, 1, -40)
    contentArea.Position = UDim2.new(0, 180, 0, 40)
    contentArea.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    contentArea.BorderSizePixel = 0
    contentArea.Parent = mainFrame

    local contentCorner = Instance.new("UICorner")
    contentCorner.CornerRadius = UDim.new(0, 10)
    contentCorner.Parent = contentArea

    -- Profile Section (Bottom-left corner)
    local profileFrame = Instance.new("Frame")
    profileFrame.Name = "ProfileFrame"
    profileFrame.Size = UDim2.new(1, 0, 0, 60)
    profileFrame.Position = UDim2.new(0, 0, 1, -60)
    profileFrame.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    profileFrame.BorderSizePixel = 0
    profileFrame.Parent = tabsContainer

    local profileCorner = Instance.new("UICorner")
    profileCorner.CornerRadius = UDim.new(0, 8)
    profileCorner.Parent = profileFrame

    -- Profile Image and Username
    local profileImage = Instance.new("ImageLabel")
    profileImage.Name = "ProfileImage"
    profileImage.Size = UDim2.new(0, 50, 0, 50)
    profileImage.Position = UDim2.new(0, 5, 0.5, -25)
    profileImage.BackgroundTransparency = 1
    profileImage.Image = "rbxthumb://type=AvatarHeadShot&id=" .. game.Players.LocalPlayer.UserId .. "&w=150&h=150"
    profileImage.Parent = profileFrame

    local profileUsername = Instance.new("TextLabel")
    profileUsername.Name = "ProfileUsername"
    profileUsername.Size = UDim2.new(1, -65, 1, 0)
    profileUsername.Position = UDim2.new(0, 60, 0, 0)
    profileUsername.BackgroundTransparency = 1
    profileUsername.Text = game.Players.LocalPlayer.Name
    profileUsername.TextColor3 = Color3.fromRGB(255, 255, 255)
    profileUsername.Font = Enum.Font.Gotham
    profileUsername.TextSize = 16
    profileUsername.TextXAlignment = Enum.TextXAlignment.Left
    profileUsername.Parent = profileFrame

    -- Notifications system
    local function createNotification(message)
        local notification = Instance.new("Frame")
        notification.Size = UDim2.new(0, 300, 0, 60)
        notification.Position = UDim2.new(0.5, -150, 0, 10)
        notification.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        notification.BorderSizePixel = 0
        notification.Parent = screenGui

        local notificationCorner = Instance.new("UICorner")
        notificationCorner.CornerRadius = UDim.new(0, 10)
        notificationCorner.Parent = notification

        local notificationLabel = Instance.new("TextLabel")
        notificationLabel.Text = message
        notificationLabel.Size = UDim2.new(1, 0, 1, 0)
        notificationLabel.BackgroundTransparency = 1
        notificationLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        notificationLabel.Font = Enum.Font.Gotham
        notificationLabel.TextSize = 16
        notificationLabel.TextWrapped = true
        notificationLabel.TextXAlignment = Enum.TextXAlignment.Center
        notificationLabel.Parent = notification

        -- Fade out and destroy notification after 3 seconds
        wait(3)
        notification:TweenTransparency(1, Enum.EasingStyle.Linear, Enum.EasingDirection.In, 1, true)
        wait(1)
        notification:Destroy()
    end

    -- Tab Management
    local tabButtons = {}
    local function showTab(tabName)
        for name, frame in pairs(tabButtons) do
            frame.Content.Visible = name == tabName
        end
    end

    function OrionLibrary:AddTab(tabName)
        local tab = Instance.new("TextButton")
        tab.Name = tabName
        tab.Size = UDim2.new(1, -10, 0, 40)
        tab.Position = UDim2.new(0, 5, 0, (#tabsContainer:GetChildren() - 1) * 45)
        tab.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        tab.Text = tabName
        tab.TextColor3 = Color3.fromRGB(255, 255, 255)
        tab.Font = Enum.Font.Gotham
        tab.TextSize = 16
        tab.Parent = tabsContainer

        local tabCorner = Instance.new("UICorner")
        tabCorner.CornerRadius = UDim.new(0, 8)
        tabCorner.Parent = tab

        local contentFrame = Instance.new("Frame")
        contentFrame.Name = tabName .. "Content"
        contentFrame.Size = UDim2.new(1, 0, 1, 0)
        contentFrame.BackgroundTransparency = 1
        contentFrame.Visible = false
        contentFrame.Parent = contentArea

        tab.MouseButton1Click:Connect(function()
            showTab(tabName)
        end)

        tabButtons[tabName] = { Button = tab, Content = contentFrame }
        return contentFrame
    end

    function OrionLibrary:AddButton(tabContent, buttonText, callback)
        local button = Instance.new("TextButton")
        button.Name = buttonText
        button.Size = UDim2.new(0, 200, 0, 40)
        button.Position = UDim2.new(0.5, -100, 0, (#tabContent:GetChildren()) * 50)
        button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        button.Text = buttonText
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.Font = Enum.Font.Gotham
        button.TextSize = 16
        button.Parent = tabContent

        local buttonCorner = Instance.new("UICorner")
        buttonCorner.CornerRadius = UDim.new(0, 8)
        buttonCorner.Parent = button

        button.MouseButton1Click:Connect(function()
            if callback then
                callback()
            end
        end)
    end

    return OrionLibrary
end

return OrionLibrary
